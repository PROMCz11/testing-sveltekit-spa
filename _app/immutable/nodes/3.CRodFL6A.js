import{s as Se,n as D,o as Ie}from"../chunks/scheduler.CtbWrGNo.js";import{S as Ae,i as Ce,e as $e,c as Fe,k as Me,l as Ue,g as Oe,d as He}from"../chunks/index.C4D7lu78.js";import{l as Pe}from"../chunks/new-logo.DsdXLF4Y.js";import{p as Ze}from"../chunks/preloader.DvsVy94I.js";const ze="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='40px'%20viewBox='0%20-960%20960%20960'%20width='40px'%20fill='%23e8eaed'%3e%3cpath%20d='m251.33-204.67-46.66-46.66L433.33-480%20204.67-708.67l46.66-46.66L480-526.67l228.67-228.66%2046.66%2046.66L526.67-480l228.66%20228.67-46.66%2046.66L480-433.33%20251.33-204.67Z'/%3e%3c/svg%3e",De="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='40px'%20viewBox='0%20-960%20960%20960'%20width='40px'%20fill='%23e8eaed'%3e%3cpath%20d='m382-80-18.67-126.67q-17-6.33-34.83-16.66-17.83-10.34-32.17-21.67L178-192.33%2079.33-365l106.34-78.67q-1.67-8.33-2-18.16-.34-9.84-.34-18.17%200-8.33.34-18.17.33-9.83%202-18.16L79.33-595%20178-767.67%20296.33-715q14.34-11.33%2032.34-21.67%2018-10.33%2034.66-16L382-880h196l18.67%20126.67q17%206.33%2035.16%2016.33%2018.17%2010%2031.84%2022L782-767.67%20880.67-595l-106.34%2077.33q1.67%209%202%2018.84.34%209.83.34%2018.83%200%209-.34%2018.5Q776-452%20774-443l106.33%2078-98.66%20172.67-118-52.67q-14.34%2011.33-32%2022-17.67%2010.67-35%2016.33L578-80H382Zm55.33-66.67h85l14-110q32.34-8%2060.84-24.5T649-321l103.67%2044.33%2039.66-70.66L701-415q4.33-16%206.67-32.17Q710-463.33%20710-480q0-16.67-2-32.83-2-16.17-7-32.17l91.33-67.67-39.66-70.66L649-638.67q-22.67-25-50.83-41.83-28.17-16.83-61.84-22.83l-13.66-110h-85l-14%20110q-33%207.33-61.5%2023.83T311-639l-103.67-44.33-39.66%2070.66L259-545.33Q254.67-529%20252.33-513%20250-497%20250-480q0%2016.67%202.33%2032.67%202.34%2016%206.67%2032.33l-91.33%2067.67%2039.66%2070.66L311-321.33q23.33%2023.66%2051.83%2040.16%2028.5%2016.5%2060.84%2024.5l13.66%20110Zm43.34-200q55.33%200%2094.33-39T614-480q0-55.33-39-94.33t-94.33-39q-55.67%200-94.5%2039-38.84%2039-38.84%2094.33t38.84%2094.33q38.83%2039%2094.5%2039ZM480-480Z'/%3e%3c/svg%3e",Ne="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='40px'%20viewBox='0%20-960%20960%20960'%20width='40px'%20fill='%23FC4850'%3e%3cpath%20d='M186.67-120q-27%200-46.84-19.83Q120-159.67%20120-186.67v-586.66q0-27%2019.83-46.84Q159.67-840%20186.67-840h292.66v66.67H186.67v586.66h292.66V-120H186.67Zm470.66-176.67-47-48%20102-102H360v-66.66h351l-102-102%2047-48%20184%20184-182.67%20182.66Z'/%3e%3c/svg%3e",ce="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='40px'%20viewBox='0%20-960%20960%20960'%20width='40px'%20fill='%23e8eaed'%3e%3cpath%20d='M286.67-286.67h146.66v-146.66H286.67v146.66Zm240%200h146.66v-146.66H526.67v146.66Zm-240-240h146.66v-146.66H286.67v146.66Zm240%200h146.66v-146.66H526.67v146.66ZM186.67-120q-27%200-46.84-19.83Q120-159.67%20120-186.67v-586.66q0-27%2019.83-46.84Q159.67-840%20186.67-840h586.66q27%200%2046.84%2019.83Q840-800.33%20840-773.33v586.66q0%2027-19.83%2046.84Q800.33-120%20773.33-120H186.67Zm0-66.67h586.66v-586.66H186.67v586.66Zm0-586.66v586.66-586.66Z'/%3e%3c/svg%3e",Je="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='40px'%20viewBox='0%20-960%20960%20960'%20width='40px'%20fill='%23e8eaed'%3e%3cpath%20d='M164.67-160v-66.67H288l-15.33-12.66q-60-49.34-86.34-109Q160-408%20160-477.33q0-107.67%2063.83-192.84%2063.84-85.16%20167.5-115.83v69.33q-74%2028-119.33%2093.84-45.33%2065.83-45.33%20145.5%200%2057%2021.33%20102.16%2021.33%2045.17%2060%2079.84L331.33-278v-115.33H398V-160H164.67Zm404.66-13.33v-70q74.67-28%20119.34-93.84%2044.66-65.83%2044.66-145.5%200-47-21.33-94.16-21.33-47.17-58.67-84.5L630.67-682v115.33H564V-800h233.33v66.67h-124l15.34%2014q56.33%2053.66%2083.83%20115.5Q800-542%20800-482.67%20800-375%20736.5-289.5%20673-204%20569.33-173.33Z'/%3e%3c/svg%3e",le="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='40px'%20viewBox='0%20-960%20960%20960'%20width='40px'%20fill='%23e8eaed'%3e%3cpath%20d='M267.33-120q-27.5%200-47.08-19.58-19.58-19.59-19.58-47.09V-740H160v-66.67h192V-840h256v33.33h192V-740h-40.67v553.33q0%2027-19.83%2046.84Q719.67-120%20692.67-120H267.33Zm425.34-620H267.33v553.33h425.34V-740Zm-328%20469.33h66.66v-386h-66.66v386Zm164%200h66.66v-386h-66.66v386ZM267.33-740v553.33V-740Z'/%3e%3c/svg%3e",oe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='40px'%20viewBox='0%20-960%20960%20960'%20width='40px'%20fill='%23e8eaed'%3e%3cpath%20d='M480-289.33q79.67%200%20135.17-55.5%2055.5-55.5%2055.5-135.17%200-79.67-55.5-135.17-55.5-55.5-135.17-55.5-79.67%200-135.17%2055.5-55.5%2055.5-55.5%20135.17%200%2079.67%2055.5%20135.17%2055.5%2055.5%20135.17%2055.5ZM480-80q-82.33%200-155.33-31.5-73-31.5-127.34-85.83Q143-251.67%20111.5-324.67T80-480q0-83%2031.5-156t85.83-127q54.34-54%20127.34-85.5T480-880q83%200%20156%2031.5T763-763q54%2054%2085.5%20127T880-480q0%2082.33-31.5%20155.33-31.5%2073-85.5%20127.34Q709-143%20636-111.5T480-80Zm0-66.67q139.33%200%20236.33-97.33t97-236q0-139.33-97-236.33t-236.33-97q-138.67%200-236%2097-97.33%2097-97.33%20236.33%200%20138.67%2097.33%20236%2097.33%2097.33%20236%2097.33ZM480-480Z'/%3e%3c/svg%3e",de="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='40px'%20viewBox='0%20-960%20960%20960'%20width='40px'%20fill='%23e8eaed'%3e%3cpath%20d='M480-80q-82.33%200-155.33-31.5-73-31.5-127.34-85.83Q143-251.67%20111.5-324.67T80-480q0-83%2031.5-156t85.83-127q54.34-54%20127.34-85.5T480-880q83%200%20156%2031.5T763-763q54%2054%2085.5%20127T880-480q0%2082.33-31.5%20155.33-31.5%2073-85.5%20127.34Q709-143%20636-111.5T480-80Zm0-66.67q139.33%200%20236.33-97.33t97-236q0-139.33-97-236.33t-236.33-97q-138.67%200-236%2097-97.33%2097-97.33%20236.33%200%20138.67%2097.33%20236%2097.33%2097.33%20236%2097.33ZM480-480Z'/%3e%3c/svg%3e";function Qe(N){let r,I=`<div id="status-display" class="status-display fs-12"></div> <div id="loading-screen"><img src="${Ze}" alt=""/></div> <div class="application hide"><div id="settings-modal-wrapper" class="settings-modal-wrapper hide"><div id="settings-modal"><div><p>Account settings</p> <img id="close-settings-modal-btn" src="${ze}" alt=""/></div> <div class="settings-modal-grid"><div class="setting"><p class="title">Username  <span class="edit-setting-btn edit-setting-btn-userFullname">Edit</span></p> <p id="setting-display-userFullname" class="setting-display">X</p></div> <div class="setting"><p class="title">Email  <span class="edit-setting-btn edit-setting-btn-email">Edit</span></p> <p id="setting-display-email" class="setting-display">X</p></div> <div class="setting"><p class="title">Password  <span class="edit-setting-btn edit-setting-btn-password">Edit</span></p> <p id="setting-display-password" class="setting-display">Hidden</p></div> <div class="setting"><p class="title">Appearance</p> <div class="appearance-selection-grid"><div data-appearance-code="1" title="Amber" style="background-color: #FFC107;" class="circle active svelte-9ndkgu"></div> <div data-appearance-code="2" title="Light Blue" style="background-color: #01FFF4;" class="circle svelte-9ndkgu"></div> <div data-appearance-code="3" title="Purple" style="background-color: #8338EC;" class="circle svelte-9ndkgu"></div> <div data-appearance-code="4" title="Pink" style="background-color: #FF1178;" class="circle svelte-9ndkgu"></div> <div data-appearance-code="5" title="Orange" style="background-color: #FB5607;" class="circle svelte-9ndkgu"></div> <div data-appearance-code="6" title="Blue" style="background-color: #3A86FF;" class="circle svelte-9ndkgu"></div> <div data-appearance-code="7" title="Scarlet" style="background-color: #A0153E;" class="circle svelte-9ndkgu"></div> <div data-appearance-code="8" title="Grape" style="background-color: #5D0E41;" class="circle svelte-9ndkgu"></div> <div data-appearance-code="9" title="Baby Pink" style="background-color: #fcb1b1;" class="circle svelte-9ndkgu"></div> <div data-appearance-code="10" title="Silver" style="background-color: #D4D5D9;" class="circle svelte-9ndkgu"></div></div></div> <div class="setting occupy-full-row"><p class="title">Automatically delete completed tasks</p> <input id="setting-display-auto-delete" type="checkbox"/></div> <div class="setting occupy-full-row"><button class="button delete-completed-tasks-btn">Delete completed tasks</button> <button class="button delete-all-tasks-btn">Delete all tasks</button></div> <div class="setting occupy-full-row"><button class="button delete-account-btn">Delete account</button></div></div> <div class="delete-account-modal hide"><p>Enter your password to confirm</p> <input class="confirm-password-input" type="password"/> <button class="button confirm-delete-account-btn">Delete Account</button> <button class="button cancel-delete-account-btn">Cancel</button></div></div></div> <div id="side-bar" class="svelte-9ndkgu"><div class="logo-container" id="logo-container"><img style="width: 25px;" src="${Pe}" alt=""/> <p class="fs-20">Task Manager</p></div> <nav class="tabs"><div id="open-settings-modal-btn" class="tab"><img style="width: 25px;" src="${De}" alt=""/> <p class="fs-16">Settings</p></div> <button id="log-out-btn"><img style="width: 20px;" src="${Ne}" alt=""/> <p class="fs-12">Log out</p></button></nav> <div id="connection-status" class="online"><div class="circle svelte-9ndkgu"></div><p>Online mode</p></div></div> <div id="guide" class="fs-12 svelte-9ndkgu"><div><img style="width: 16px;" src="${ce}" alt=""/> <p>All Tasks</p></div> <div><div class="circle svelte-9ndkgu"></div> <p>Undone</p></div> <div><div class="circle svelte-9ndkgu"></div> <p>Important</p></div> <div><div class="circle svelte-9ndkgu"></div> <p>Completed</p></div></div> <main class="svelte-9ndkgu"><header class="svelte-9ndkgu"><div class="svelte-9ndkgu"><p id="first-name-tasks"></p> <div id="filters" class="svelte-9ndkgu"><img class="all-tasks-filter svelte-9ndkgu" style="width: 16px;" src="${ce}" alt=""/> <div class="circle undone-tasks-filter active-filter svelte-9ndkgu"></div> <div class="circle important-tasks-filter svelte-9ndkgu"></div> <div class="circle completed-tasks-filter svelte-9ndkgu"></div></div></div> <input class="fs-12 svelte-9ndkgu" id="task-input" type="text" placeholder="Enter a task..."/></header> <div class="fs-12" id="task-container"></div></main> <div style="position: fixed; bottom: 1rem; right: 1rem; z-index: 10; color: #333333;" id="testing-info"><p style="font-size: .8rem;" id="testing-info__userID"></p> <p>1.12.27</p></div></div>`;return{c(){r=$e("div"),r.innerHTML=I,this.h()},l(w){r=Fe(w,"DIV",{class:!0,"data-svelte-h":!0}),Me(r)!=="svelte-fit3ub"&&(r.innerHTML=I),this.h()},h(){Ue(r,"class","body-app svelte-9ndkgu")},m(w,M){Oe(w,r,M)},p:D,i:D,o:D,d(w){w&&He(r)}}}function Ve(N){return Ie(()=>{const r=document.getElementById("task-container"),I=document.getElementById("side-bar"),w=document.querySelector(".application"),M=document.getElementById("loading-screen"),re=document.getElementById("first-name-tasks"),E=document.getElementById("status-display"),U=document.querySelector("body"),J=document.querySelectorAll(".settings-modal-grid .setting .circle"),u=document.getElementById("connection-status");let n=[],B="",A="",O="",Q,k=0,y=1,g=[],L=[];const pe=t=>{var e=t.split(".")[1],s=e.replace(/-/g,"+").replace(/_/g,"/"),c=decodeURIComponent(window.atob(s).split("").map(function(p){return"%"+("00"+p.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(c)},H=t=>{switch(t){case 0:u.classList.remove("online"),u.classList.add("offline"),u.innerHTML='<div class="circle"></div><p>Offline mode</p>';break;case 1:u.classList.remove("offline"),u.classList.add("online"),u.innerHTML='<div class="circle"></div><p>Online mode</p>';break;case 2:u.classList.remove("online"),u.classList.remove("offline"),u.classList.add("sync"),u.innerHTML=`<div><img src="${Je}" alt=""></div><p>Syncing</p>`;break}},me=()=>{H(0),y=0},V=()=>{ge();const t=n.filter(e=>e._id.includes("-fake-id"));t.forEach(e=>{delete e.UserId,delete e.__v,delete e.last_updated}),fetch("https://task-manager-back-end-7gbe.onrender.com/api/offline",{method:"POST",body:JSON.stringify({addArray:t,updateArray:g.filter(e=>!L.includes(e._id)&&!e._id.includes("-fake-id")),deleteArray:L.filter(e=>!e.includes("-fake-id"))}),headers:{"Content-type":"application/json; charset=UTF-8",Authorization:`Bearer ${m()}`}}).then(e=>e.json()).then(e=>{e.status?(H(1),y=1,g=[],L=[],e.data&&e.data.idPairs.forEach(c=>{const p=n.findIndex(l=>l._id===c.fakeID);if(n[p]._id=c.realID,document.getElementById(c.fakeID)){const l=document.getElementById(c.fakeID);l.id=c.realID}})):console.log(e.message)}).catch(e=>{V()})},ge=()=>{H(2)};window.addEventListener("online",V),window.addEventListener("offline",me);const j=async()=>{const e=await(await fetch("https://task-manager-back-end-7gbe.onrender.com/api/tasks",{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:`Bearer ${m()}`}})).json();if(e.status)return e.data;i(e.message,!1),console.log("Error msg from the server: "+e.message)},ue=t=>{n=t.tasks.slice(),B=t.name,A=B.split(" ")[0],O=t.email,Q=t.appearance,k=t.auto_delete},m=()=>{const t=document.cookie.split("; ").find(s=>s.startsWith("authToken="));return t?t.split("=")[1]:null},fe=()=>{document.getElementById("setting-display-userFullname").textContent=B,document.getElementById("setting-display-email").textContent=O,document.getElementById("setting-display-auto-delete").checked=k},ve=()=>{M.classList.toggle("hide"),w.classList.toggle("hide")},W=()=>{re.textContent=`${A}'s Tasks`},R=()=>pe(m()).UserId,he=()=>{Y.querySelectorAll("*").forEach(t=>{if(t.classList.contains("active-filter"))switch(!0){case t.classList.contains("all-tasks-filter"):b(v(n,0));break;case t.classList.contains("undone-tasks-filter"):b(v(n,1));break;case t.classList.contains("important-tasks-filter"):b(v(n,2));break;case t.classList.contains("completed-tasks-filter"):b(v(n,3));break}})},ke=()=>{j().then(t=>{ue(t),he(),ve(),ie(Q),fe(),W(),i(`Welcome back ${A}`,!0),P()&&(r.textContent=_);const e=document.getElementById("testing-info__userID");e.textContent="ID: "+R()}).catch(t=>{navigator.onLine?(setTimeout(()=>{window.location.href="login"},2e3),console.log(t)):i("We've entered offline mode",!0)})},ye=t=>/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t),_="No tasks",P=()=>!r.textContent.trim();ke();const v=(t,e)=>{switch(e){case 0:return t;case 1:return t.filter(s=>!s.completed);case 2:return t.filter(s=>s.important&&!s.completed);case 3:return t.filter(s=>s.completed)}},b=t=>{r.innerHTML=t.reduce((e,s)=>(e+=`
                    <div class="task-wrapper">
                    <img class="delete-icon" src="${le}" alt="">
                        <div title="Last updated: ${f(s.last_updated)}" class="task ${s.completed?"completed":""} ${s.important?"important":""}" id="${s._id}">
                            <p contenteditable class="task-content">${s.content}</p>
                            <p class="task-date">${f(s.date)}</p>
                            <div class="filter-indicators">
                                <div title="Mark as complete" class="circle completed-indicator"></div>
                                <div title="Mark as important" class="circle important-indicator"></div>
                            </div>
                        </div>
                        <img class="task-radio-unchecked" src="${de}" alt="">
                        <img class="task-radio-checked" src="${oe}" alt="">
                    </div>
                `,e),"")},f=t=>{const e=new Date(t),s={weekday:"short",day:"numeric",month:"numeric",hour:"numeric",minute:"2-digit",hour12:!0};return e.toLocaleTimeString(void 0,s).split(",").join("")},i=(t,e)=>{E.textContent=t,e?(E.classList.toggle("status-show-success"),setTimeout(()=>{E.classList.toggle("status-show-success"),setTimeout(()=>{E.textContent=""},500)},1e3)):(E.classList.toggle("status-show-fail"),setTimeout(()=>{E.classList.toggle("status-show-fail")},1e3))},be=()=>{let t;do t=Math.floor(1e5+Math.random()*9e5);while(n.map(e=>e._id).includes(t));return t},we=t=>{const e=t,s=new Date().getTime(),c=!!document.querySelector(".important-tasks-filter").classList.contains("active-filter"),p=!!document.querySelector(".completed-tasks-filter").classList.contains("active-filter"),l=R();if(C.value="",y)fetch("https://task-manager-back-end-7gbe.onrender.com/api/tasks/add",{method:"POST",body:JSON.stringify({content:e,date:s,important:c,completed:p}),headers:{"Content-type":"application/json; charset=UTF-8",Authorization:`Bearer ${m()}`}}).then(a=>a.json()).then(a=>{if(a.status){const d={_id:a.data.id,content:e,date:s,UserId:l,important:c,completed:p,__v:0};n.push(d),r.innerHTML.trim()==_&&(r.innerHTML=""),G(d)}else i(a.message,!1),console.log(a.message)}).catch(a=>{i(a,!1)});else{const o={_id:be()+"-fake-id",content:e,date:s,UserId:l,important:c,completed:p,__v:0};n.push(o),r.innerHTML.trim()==_&&(r.innerHTML=""),G(o)}},G=t=>{const e=`
                <div class="task-wrapper">
                    <img class="delete-icon" src="${le}" alt="">
                    <div title="Last updated: ${f(new Date().getTime())}" class="task ${document.querySelector(".important-tasks-filter").classList.contains("active-filter")?"important":""} ${document.querySelector(".completed-tasks-filter").classList.contains("active-filter")?"completed":""}" id="${t._id}">
                        <p contenteditable class="task-content">${t.content}</p>
                        <p class="task-date">${f(t.date)}</p>
                        <div class="filter-indicators">
                            <div title="Mark as complete" class="circle completed-indicator"></div>
                            <div title="Mark as important" class="circle important-indicator"></div>
                        </div>
                    </div>
                        <img class="task-radio-unchecked" src="${de}" alt="">
                        <img class="task-radio-checked" src="${oe}" alt="">
                </div>
            `;r.innerHTML+=e},C=document.getElementById("task-input");C.addEventListener("keyup",t=>{t.key==="Enter"&&(C.value!==""?we(C.value):i("Please enter task content",!1))});const x=t=>{const e=t.parentElement;t.classList.toggle("task-fade-out-animation"),setTimeout(()=>{r.removeChild(e)},300)},$=t=>{if(k)document.getElementById(t)&&x(document.getElementById(t));else{const e=document.getElementById(t);x(e)}n=n.filter(e=>e._id!=t),i("Task deleted successfully",!0),P()&&(r.textContent=_)},Z=t=>{y?fetch("https://task-manager-back-end-7gbe.onrender.com/api/tasks/delete",{method:"DELETE",body:JSON.stringify({ids:[t]}),headers:{"Content-type":"application/json; charset=UTF-8",Authorization:`Bearer ${m()}`}}).then(e=>e.json()).then(e=>{e.status?$(t):(i(e.message,!1),console.log("Error msg:"+e.message))}).catch(e=>{i(e,!1)}):L.includes(t)||(L.push(t),$(t))},X=t=>{y?fetch("https://task-manager-back-end-7gbe.onrender.com/api/tasks/delete",{method:"DELETE",body:JSON.stringify({ids:t}),headers:{"Content-type":"application/json; charset=UTF-8",Authorization:`Bearer ${m()}`}}).then(e=>e.json()).then(e=>{e.status?t.forEach(s=>{$(s)}):(i(e.message,!1),console.log(e.message))}).catch(e=>{i(e,!1)}):t.forEach(e=>{L.includes(e)||(L.push(e),$(e))})};r.addEventListener("click",t=>{const e=t.target;if(e.classList.contains("delete-icon")){const s=e.parentElement.querySelector(".task").id;Z(s)}else if(e.classList.contains("task-radio-checked")||e.classList.contains("task-radio-unchecked")){const s=e.parentElement.querySelector(".task");s.classList.contains("completed")?(T(s.id,void 0,void 0,void 0,!1),document.querySelector(".completed-tasks-filter").classList.contains("active-filter")&&x(s)):(k?Z(s.id):T(s.id,void 0,void 0,void 0,!0),(document.querySelector(".undone-tasks-filter").classList.contains("active-filter")||document.querySelector(".important-tasks-filter").classList.contains("active-filter"))&&x(s)),s.classList.toggle("completed")}else if(e.classList.contains("important-indicator")){const s=e.parentElement.parentElement;s.classList.contains("important")?(T(s.id,void 0,void 0,!1,void 0),document.querySelector(".important-tasks-filter").classList.contains("active-filter")&&x(s)):T(s.id,void 0,void 0,!0,void 0),s.classList.toggle("important")}else if(e.classList.contains("completed-indicator")){const s=e.parentElement.parentElement;s.classList.contains("completed")?(T(s.id,void 0,void 0,void 0,!1),document.querySelector(".completed-tasks-filter").classList.contains("active-filter")&&x(s)):(k?Z(s.id):T(s.id,void 0,void 0,void 0,!0),(document.querySelector(".undone-tasks-filter").classList.contains("active-filter")||document.querySelector(".important-tasks-filter").classList.contains("active-filter"))&&x(s)),s.classList.toggle("completed")}});const K=()=>{Le("authToken"),window.location.href="login"},Le=t=>{document.cookie=t+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT;"};document.getElementById("log-out-btn").addEventListener("click",K);const T=(t,e,s,c,p)=>{const l=new Date().getTime();if(e!==void 0)if(y)fetch(`https://task-manager-back-end-7gbe.onrender.com/api/tasks/update/${t}`,{method:"PATCH",body:JSON.stringify({content:e,last_updated:l}),headers:{"Content-type":"application/json; charset=UTF-8",Authorization:`Bearer ${m()}`}}).then(a=>a.json()).then(a=>{if(a.status){const o=n.findIndex(d=>d._id===t);n[o].content=e,n[o].last_updated=l,document.getElementById(n[o]._id).title="Last updated: "+f(l)}else i(a.message,!1),console.log(a.message)}).catch(a=>{i(a,!1)});else{const a=n.findIndex(d=>d._id===t);n[a].content=e,n[a].last_updated=l,document.getElementById(n[a]._id).title="Last updated: "+f(l);const o=g.findIndex(d=>d._id===t);if(o===-1){const d={_id:t,content:e,last_updated:l};g.push(d)}else g[o].content=e,g[o].last_updated=l}if(c!==void 0)if(y)fetch(`https://task-manager-back-end-7gbe.onrender.com/api/tasks/update/${t}`,{method:"PATCH",body:JSON.stringify({important:c,last_updated:l}),headers:{"Content-type":"application/json; charset=UTF-8",Authorization:`Bearer ${m()}`}}).then(a=>a.json()).then(a=>{if(a.status){const o=n.findIndex(d=>d._id===t);n[o].important=c,n[o].last_updated=l,document.getElementById(n[o]._id)&&(document.getElementById(n[o]._id).title="Last updated: "+f(l))}else i(a.message,!1),console.log(a.message,!1)}).catch(a=>{i(a,!1)});else{const a=n.findIndex(d=>d._id===t);n[a].important=c,n[a].last_updated=l,document.getElementById(n[a]._id)&&(document.getElementById(n[a]._id).title="Last updated: "+f(l));const o=g.findIndex(d=>d._id===t);if(o===-1){const d={_id:t,important:c,last_updated:l};g.push(d)}else g[o].important=c,g[o].last_updated=l}if(p!==void 0)if(y)fetch(`https://task-manager-back-end-7gbe.onrender.com/api/tasks/update/${t}`,{method:"PATCH",body:JSON.stringify({completed:p,last_updated:l}),headers:{"Content-type":"application/json; charset=UTF-8",Authorization:`Bearer ${m()}`}}).then(a=>a.json()).then(a=>{if(a.status){const o=n.findIndex(d=>d._id===t);n[o].completed=p,n[o].last_updated=l,document.getElementById(n[o]._id)&&(document.getElementById(n[o]._id).title="Last updated: "+f(l))}else i(a.message,!1)}).catch(a=>{i(a,!1)});else{const a=n.findIndex(d=>d._id===t);n[a].completed=p,n[a].last_updated=l,document.getElementById(n[a]._id)&&(document.getElementById(n[a]._id).title="Last updated: "+f(l));const o=g.findIndex(d=>d._id===t);if(o===-1){const d={_id:t,completed:p,last_updated:l};g.push(d)}else g[o].completed=p,g[o].last_updated=l}};r.addEventListener("click",t=>{const e=t.target;e.classList.contains("task-content")&&!e.classList.contains("has-event-listener")&&(e.classList.add("has-event-listener"),e.addEventListener("blur",()=>{T(e.parentElement.id,e.textContent,void 0,void 0,void 0)}),e.addEventListener("keydown",s=>{s.key==="Enter"&&(s.preventDefault(),e.blur())}))});const Y=document.getElementById("filters"),F=t=>{Array.from(t.parentElement.children).forEach(s=>{s.classList.remove("active-filter")}),t.classList.add("active-filter"),P()&&(r.textContent=_)};Y.addEventListener("click",t=>{const e=t.target;switch(!0){case e.classList.contains("all-tasks-filter"):b(v(n,0)),F(e);break;case e.classList.contains("undone-tasks-filter"):b(v(n,1)),F(e);break;case e.classList.contains("important-tasks-filter"):b(v(n,2)),F(e);break;case e.classList.contains("completed-tasks-filter"):b(v(n,3)),F(e);break}});const S=document.getElementById("settings-modal-wrapper"),xe=document.getElementById("settings-modal"),Te=document.getElementById("close-settings-modal-btn"),ee=document.getElementById("open-settings-modal-btn"),q=(t,e)=>{t.textContent="Edit",e.style.color="#757575",e.contentEditable=!1,e.classList.remove("active-setting-input")},te=t=>{const e=t.textContent.trim();e.split(" ").length!=2||!e?i("Name has to be two words",!1):fetch("https://task-manager-back-end-7gbe.onrender.com/api/user/update",{method:"PATCH",body:JSON.stringify({name:e}),headers:{"Content-type":"application/json; charset=UTF-8",Authorization:`Bearer ${m()}`}}).then(s=>s.json()).then(s=>{s.status?(i("Username saved",!0),B=e,A=B.split(" ")[0],W()):(i(s.message,!1),console.log(s.message))}).catch(s=>i(s,!1))},se=t=>{const e=t.textContent.trim().toLowerCase();ye(e)?fetch("https://task-manager-back-end-7gbe.onrender.com/api/user/update",{method:"PATCH",body:JSON.stringify({email:e}),headers:{"Content-type":"application/json; charset=UTF-8",Authorization:`Bearer ${m()}`}}).then(s=>s.json()).then(s=>{s.status?(i("Email saved",!0),O=e):(i(s.message,!1),console.log(s.message))}).catch(s=>i(s,!1)):i("Enter a valid Email",!1)},Ee=t=>{const e=new Date;e.setMonth(e.getMonth()+1),document.cookie=`authToken=${t}; expires=${e.toUTCString()}`},ae=t=>{const e=t.textContent.trim();e==""?i("Password can't be empty",!1):fetch("https://task-manager-back-end-7gbe.onrender.com/api/user/update",{method:"PATCH",body:JSON.stringify({password:e}),headers:{"Content-type":"application/json; charset=UTF-8",Authorization:`Bearer ${m()}`}}).then(s=>s.json()).then(s=>{if(s.status){const c=s.data.authToken;Ee(c),j(),i("Password saved",!0),t.textContent=t.textContent.trim().split("").map(p=>"*").join("")}else i(s.message,!1),console.log(s.message)}).catch(s=>i(s,!1))},ne=()=>{fetch("https://task-manager-back-end-7gbe.onrender.com/api/user/update",{method:"PATCH",body:JSON.stringify({auto_delete:k}),headers:{"Content-type":"application/json; charset=UTF-8",Authorization:`Bearer ${m()}`}}).then(t=>t.json()).then(t=>{t.status?i("Auto delete preferance updated successfully",!0):(i(t.message,!1),console.log(t.message))}).catch(t=>i(t,!1))},qe=t=>{fetch("https://task-manager-back-end-7gbe.onrender.com/api/user/delete",{method:"DELETE",body:JSON.stringify({password:t}),headers:{"Content-type":"application/json; charset=UTF-8",Authorization:`Bearer ${m()}`}}).then(e=>e.json()).then(e=>{e.status?K():(i(e.message,!1),console.log(e.message))}).catch(e=>i(e,!1))},z=(t,e)=>{e.classList.add("active-setting-input"),t.textContent="Save",e.contentEditable=!0,e.style.color="white",e.focus(),document.execCommand("selectAll",!1,null),e.addEventListener("keydown",s=>{s.key==="Enter"&&(s.preventDefault(),e.id==="setting-display-userFullname"?(te(e),q(t,e)):e.id==="setting-display-email"?(se(e),q(t,e)):e.id==="setting-display-password"&&(ae(e),q(t,e)))})};S.addEventListener("click",t=>{const e=t.target;if(e===Te)S.classList.toggle("hide");else if(e===S)S.classList.toggle("hide");else if(e.classList.contains("edit-setting-btn-userFullname")){const s=document.getElementById("setting-display-userFullname");s.classList.contains("active-setting-input")?(te(s),q(e,s)):z(e,s)}else if(e.classList.contains("edit-setting-btn-email")){const s=document.getElementById("setting-display-email");s.classList.contains("active-setting-input")?(se(s),q(e,s)):z(e,s)}else if(e.classList.contains("edit-setting-btn-password")){const s=document.getElementById("setting-display-password");s.classList.contains("active-setting-input")?(ae(s),q(e,s)):z(e,s)}else if(e.classList.contains("circle")){const s=parseInt(e.getAttribute("data-appearance-code"));ie(s),fetch("https://task-manager-back-end-7gbe.onrender.com/api/user/update",{method:"PATCH",body:JSON.stringify({appearance:s}),headers:{"Content-type":"application/json; charset=UTF-8",Authorization:`Bearer ${m()}`}}).then(c=>c.json()).then(c=>{c.status?i("Appearance Updated",!0):(i(c.message,!1),console.log(c.message))}).catch(c=>i(c,!1))}else if(e.id==="setting-display-auto-delete")e.checked?(k=1,ne()):(k=0,ne());else if(e.classList.contains("delete-completed-tasks-btn")){const s=v(n,3).map(c=>c._id);X(s)}else if(e.classList.contains("delete-all-tasks-btn")){const s=n.map(c=>c._id);X(s)}else if(e.classList.contains("delete-account-btn")){const s=xe.querySelector(".delete-account-modal");s.classList.remove("hide");const c=s.querySelector(".confirm-password-input");s.addEventListener("click",p=>{const l=p.target;if(l.classList.contains("confirm-delete-account-btn")){const a=c.value.trim();a?qe(a):alert("Please provide a password to confirm deleting your account")}else l.classList.contains("cancel-delete-account-btn")&&s.classList.add("hide")})}});const Be=()=>{U.classList=Array.from(U.classList).filter(t=>!t.includes("appearance-"))},_e=()=>{J.forEach(t=>{t.classList.remove("active")})},h=(t,e)=>{U.classList.add(t),J[e-1].classList.add("active")},ie=t=>{switch(Be(),_e(),t){case 2:h("appearance-light-blue",t);break;case 3:h("appearance-purple",t);break;case 4:h("appearance-pink",t);break;case 5:h("appearance-orange",t);break;case 6:h("appearance-blue",t);break;case 7:h("appearance-scarlet",t);break;case 8:h("appearance-grape",t);break;case 9:h("appearance-baby-pink",t);break;case 10:h("appearance-silver",t);break}};I.addEventListener("click",t=>{const e=t.target;(e===ee||e.parentElement===ee)&&S.classList.toggle("hide")}),document.getElementById("logo-container").addEventListener("click",()=>{window.location.href="/"}),(()=>{let t=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor||window.opera),t})()&&(window.location.href=`https://task-manager-mobile.pages.dev?authToken=${m()}`)}),[]}class et extends Ae{constructor(r){super(),Ce(this,r,Ve,Qe,Se,{})}}export{et as component};
